<h1>Admin Panel</h1>
<form method="post">
    <button type="submit" class="btn btn-primary" asp-controller="EmployeePanel" asp-action="AddUser">Create User</button>
</form>

<table class="table table-striped" id="table">
    <thead>
        <tr>
            <th>User Name</th>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Roles</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<script src='@Url.Content("~/lib/jquery/dist/jquery.js")' type="text/javascript"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"></script>
<script>

    InitPage();
    function InitPage() {
        $.ajax({
            type: "Get",
            url: '@Url.Action("ReturnUser", "EmployeePanel")',
            success: function (data) {
                console.log(data);
                $('#table').DataTable({
                    data: data,
                    columns: [
                        { data: 'user.userName' },
                        { data: 'user.email' },
                        { data: 'user.firstName' },
                        { data: 'user.lastName' },
                        { data: 'role' },
                        { data: 'user.id'}
                    ],
                    columnDefs: [{
                        targets: 5,
                        orderable: false,
                        className: 'button',
                        render: function (data, type, row, meta) {
                            return ` <a class="btn btn-primary" href="/EmployeePanel/EditUser?userId=${data}">Edit</a>
                            <a class="btn btn-primary" href="@Url.Action("DeleteUser", "EmployeePanel")?userId=${data}">Delete</a>`;
                        }
                    }],
                    order: [[1, 'asc']]
                })
            }
        });
    }
</script>